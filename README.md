# Gomdolbook Back-end (κ³°λλ¶ λ°±μ—”λ“)

Gomdolbookμ€ μ‚¬μ©μλ“¤μ΄ μμ‹ μ λ…μ„ κΈ°λ΅μ„ ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•κ³ , μ±… μ»¬λ ‰μ…μ„ λ§λ“¤λ©°, μ•λΌλ” APIλ¥Ό ν†µν•΄ λ‹¤μ–‘ν• λ„μ„ μ •λ³΄λ¥Ό νƒμƒ‰ν•  μ μλ„λ΅ λ•λ” μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ λ°±μ—”λ“ μ‹μ¤ν…μ…λ‹λ‹¤. Spring Bootλ¥Ό κΈ°λ°μΌλ΅ κµ¬μ¶•λμ—μΌλ©°, RESTful APIλ¥Ό ν†µν•΄ ν”„λ΅ νΈμ—”λ“μ™€ ν†µμ‹ ν•©λ‹λ‹¤.

## μ£Όμ” κΈ°λ¥

Gomdolbook λ°±μ—”λ“λ” λ‹¤μκ³Ό κ°™μ€ ν•µμ‹¬ κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤:

### 1. λ…μ„ κΈ°λ΅ κ΄€λ¦¬

* **λ…μ„ μƒνƒ κ΄€λ¦¬:** μ±…μ λ…μ„ μƒνƒ(μ½κΈ° μ „, μ½λ” μ¤‘, μ½μ, μ‹ κ·)λ¥Ό `READING`, `FINISHED`, `TO_READ`, `NEW` λ“± λ‹¤μ–‘ν• μƒνƒλ΅ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.
* **λ…μ„ λ…ΈνΈ μ‘μ„±:** κ° μ±…μ— λ€ν• κ°μΈμ μΈ λ…ΈνΈ(note1, note2, note3)λ¥Ό κΈ°λ΅ν•  μ μμµλ‹λ‹¤.
* **λ³„μ  λ¶€μ—¬:** μ±…μ— λ€ν• λ³„μ (`rating`)μ„ κΈ°λ΅ν•  μ μμµλ‹λ‹¤.
* **λ…μ„ μ‹μ‘/μ™„λ£μΌ κΈ°λ΅:** μ±…μ λ…μ„ μ‹μ‘μΌ(`startedAt`)κ³Ό μ™„λ£μΌ(`finishedAt`)μ„ κΈ°λ΅ν•μ—¬ λ…μ„ μµκ΄€μ„ μ¶”μ ν•  μ μμµλ‹λ‹¤.
* **μ›”λ³„ λ…μ„ ν„ν™©:** μ™„λ£λ μ±…λ“¤μ μ›”λ³„ λ©λ΅μ„ μΊλ¦°λ” ν•μ‹μΌλ΅ μ΅°νν•μ—¬ λ…μ„ ν„ν™©μ„ ν•λμ— νμ•…ν•  μ μμµλ‹λ‹¤.

### 2. μ±… μ»¬λ ‰μ… κΈ°λ¥

* **λ‚λ§μ μ»¬λ ‰μ… μƒμ„±:** μ‚¬μ©μκ°€ μ›ν•λ” μ΄λ¦„μΌλ΅ μμ‹ λ§μ μ±… μ»¬λ ‰μ…(μ: "μΈμƒ μ±…", "2024λ…„ λ…μ„ λ©λ΅")μ„ λ§λ“¤ μ μμµλ‹λ‹¤.
* **μ»¬λ ‰μ…μ— μ±… μ¶”κ°€/μ κ±°:** μƒμ„±ν• μ»¬λ ‰μ…μ— μ±…μ„ μ¶”κ°€ν•κ±°λ‚ μ κ±°ν•  μ μμµλ‹λ‹¤.
* **μ»¬λ ‰μ… λ©λ΅ μ΅°ν:** μμ‹ μ΄ λ§λ“  λ¨λ“  μ»¬λ ‰μ…κ³Ό κ° μ»¬λ ‰μ…μ— ν¬ν•¨λ μ±…μ μ»¤λ²„ μ΄λ―Έμ§€λ¥Ό ν•λμ— ν™•μΈν•  μ μμµλ‹λ‹¤.

### 3. μ•λΌλ” API μ—°λ™

* **λ„μ„ μ •λ³΄ κ²€μƒ‰:** μ•λΌλ” APIλ¥Ό ν†µν•΄ ISBN, μ λ© λ“±μ„ κΈ°λ°μΌλ΅ μ±… μ •λ³΄λ¥Ό κ²€μƒ‰ν•κ³  μƒμ„Έ μ •λ³΄λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.
* **λ„μ„ μ •λ³΄ μΊμ‹±:** μ•λΌλ” APIλ΅λ¶€ν„° κ°€μ Έμ¨ λ„μ„ μ •λ³΄λ” μΊμ‹±λμ–΄ λ¶ν•„μ”ν• API νΈμ¶μ„ μ¤„μ΄κ³  μ‘λ‹µ μ†λ„λ¥Ό ν–¥μƒμ‹ν‚µλ‹λ‹¤.

### 4. μ‚¬μ©μ μΈμ¦ λ° μΈκ°€

* **OAuth2 Resource Server (JWT):** Keycloakκ³Ό κ°™μ€ OAuth2 μ„λ²„λ¥Ό ν†µν•΄ JWT(JSON Web Token)λ¥Ό μ‚¬μ©ν•μ—¬ μ‚¬μ©μ μΈμ¦ λ° μΈκ°€λ¥Ό μ²λ¦¬ν•©λ‹λ‹¤. `email` ν΄λ μ„μ„ κΈ°λ°μΌλ΅ μ‚¬μ©μ μ •λ³΄λ¥Ό μ‹λ³„ν•©λ‹λ‹¤.
* **μ‚¬μ©μ μλ™ λ“±λ΅:** μƒλ΅μ΄ μ‚¬μ©μκ°€ μ„λΉ„μ¤λ¥Ό μ΄μ©ν•  κ²½μ°, μλ™μΌλ΅ μ‚¬μ©μ μ •λ³΄λ¥Ό μ‹μ¤ν…μ— λ“±λ΅ν•©λ‹λ‹¤.

### 5. μ‹μ¤ν… μ•„ν‚¤ν…μ²

* **Spring Boot κΈ°λ°:** Java Spring Boot ν”„λ μ„μ›ν¬λ¥Ό μ‚¬μ©ν•μ—¬ κ²¬κ³ ν•κ³  ν™•μ¥ κ°€λ¥ν• λ°±μ—”λ“λ¥Ό κµ¬μ¶•ν–μµλ‹λ‹¤.
* **JPA & QueryDSL:** λ°μ΄ν„°λ² μ΄μ¤ μμ†μ„± κ³„μΈµμ€ Spring Data JPAμ™€ QueryDSLμ„ ν™μ©ν•μ—¬ ν¨μ¨μ μΈ λ°μ΄ν„° μ ‘κ·Ό λ° λ³µμ΅ν• μΏΌλ¦¬λ¥Ό κµ¬ν„ν•©λ‹λ‹¤.
* **Caffeine Cache:** λΉ λ¥Έ μ‘λ‹µμ„ μ„ν•΄ Caffeine κΈ°λ°μ λ΅μ»¬ μΊμ‹λ¥Ό μ μ©ν•μ—¬ λ°λ³µμ μΈ λ°μ΄ν„° μ΅°ν μ„±λ¥μ„ μµμ ν™”ν•©λ‹λ‹¤.
* **AOP (Aspect-Oriented Programming):** λ΅κΉ…, μ‚¬μ©μ μ ν¨μ„± κ²€μ¦ λ“±μ ν΅λ‹¨ κ΄€μ‹¬μ‚¬(cross-cutting concerns)λ¥Ό AOPλ΅ λ¶„λ¦¬ν•μ—¬ μ½”λ“μ κ°€λ…μ„±κ³Ό μ μ§€λ³΄μμ„±μ„ λ†’μ€μµλ‹λ‹¤.
* **μμ™Έ μ²λ¦¬:** μ „μ—­ μμ™Έ μ²λ¦¬(`CustomExceptionHandler`)λ¥Ό ν†µν•΄ μΌκ΄€λ μ¤λ¥ μ‘λ‹µμ„ μ κ³µν•μ—¬ ν΄λΌμ΄μ–ΈνΈκ°€ μμΈ΅ κ°€λ¥ν• λ°©μ‹μΌλ΅ μ¤λ¥λ¥Ό μ²λ¦¬ν•  μ μλ„λ΅ λ•μµλ‹λ‹¤.

## μ‚¬μ© λ°©λ²• (API μ—”λ“ν¬μΈνΈ)

Gomdolbook λ°±μ—”λ“λ” RESTful APIλ¥Ό ν†µν•΄ κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤. λ‹¤μμ€ μ£Όμ” API μ—”λ“ν¬μΈνΈ λ° μ‚¬μ© μμ‹μ…λ‹λ‹¤.

### π“ λ„μ„ λ° λ…μ„ κΈ°λ΅ κ΄€λ ¨ API

* **μ•λΌλ” λ„μ„ μ •λ³΄ μ΅°ν**
    * `GET /v1/book/{isbn}`: ISBNμ„ ν†µν•΄ μ•λΌλ”μ—μ„ λ‹¨μΌ λ„μ„ μ •λ³΄λ¥Ό κ°€μ Έμµλ‹λ‹¤.
    * `GET /v1/book/search?q={query}`: κ²€μƒ‰μ–΄λ¥Ό ν†µν•΄ μ•λΌλ”μ—μ„ λ„μ„λ¥Ό κ²€μƒ‰ν•©λ‹λ‹¤.
* **λ‚΄ μ„μ¬ λ° λ…μ„ κΈ°λ΅ μ΅°ν/μμ •**
    * `POST /v1/book/save`: λ„μ„ μ •λ³΄λ¥Ό μ €μ¥ν•κ³  λ…μ„ κΈ°λ΅μ„ μ‹μ‘ν•©λ‹λ‹¤. `status` ν•„λ“λ¥Ό ν¬ν•¨ν•  μ μμµλ‹λ‹¤.
    * `GET /v1/readingLog?isbn={isbn}`: νΉμ • ISBNμ μ±…μ— λ€ν• λ‚΄ λ…μ„ κΈ°λ΅ μƒμ„Έ μ •λ³΄(λ…ΈνΈ, λ³„μ , μƒνƒ λ“±)λ¥Ό μ΅°νν•©λ‹λ‹¤.
    * `POST /v1/readingLog/update`: λ…μ„ κΈ°λ΅μ λ…ΈνΈ(`note1`, `note2`, `note3`) λ‚΄μ©μ„ μμ •ν•©λ‹λ‹¤.
    * `POST /v1/readingLog/rating/update?isbn={isbn}&star={star}`: νΉμ • μ±…μ λ³„μ μ„ μ—…λ°μ΄νΈν•©λ‹λ‹¤.
    * `GET /v1/status/{isbn}`: νΉμ • ISBNμ μ±…μ— λ€ν• ν„μ¬ λ…μ„ μƒνƒλ¥Ό μ΅°νν•©λ‹λ‹¤.
    * `POST /v1/status/{isbn}/update?status={status}`: νΉμ • μ±…μ λ…μ„ μƒνƒλ¥Ό μ—…λ°μ΄νΈν•©λ‹λ‹¤.
    * `GET /v1/book/Library?status={status}`: νΉμ • λ…μ„ μƒνƒ(`READING`, `FINISHED` λ“±)μ— ν•΄λ‹Ήν•λ” λ‚΄ μ„μ¬ λ©λ΅μ„ μ΅°νν•©λ‹λ‹¤.
    * `GET /v1/book/calendar/finished`: μ™„λ£λ μ±…λ“¤μ μ›”λ³„ μΊλ¦°λ” λ°μ΄ν„°λ¥Ό μ΅°νν•©λ‹λ‹¤.

### π“¦ μ»¬λ ‰μ… κ΄€λ¦¬ API

* `GET /v1/collection/list`: λ‚΄κ°€ λ§λ“  λ¨λ“  μ»¬λ ‰μ… λ©λ΅κ³Ό κ° μ»¬λ ‰μ…μ— ν¬ν•¨λ μ±…λ“¤μ μ»¤λ²„ μ΄λ―Έμ§€λ¥Ό μ΅°νν•©λ‹λ‹¤.
* `GET /v1/collection/{name}`: νΉμ • μ»¬λ ‰μ…μ— ν¬ν•¨λ λ¨λ“  μ±…μ μƒμ„Έ μ •λ³΄λ¥Ό μ΅°νν•©λ‹λ‹¤.
* `POST /v1/collection/create?name={name}`: μƒλ΅μ΄ μ±… μ»¬λ ‰μ…μ„ μƒμ„±ν•©λ‹λ‹¤.
* `POST /v1/collection/{name}/book/add`: νΉμ • μ»¬λ ‰μ…μ— μ±…μ„ μ¶”κ°€ν•©λ‹λ‹¤. μ”μ²­ λ³Έλ¬Έμ—λ” `BookSaveCommand` ν•νƒμ μ±… μ •λ³΄κ°€ ν•„μ”ν•©λ‹λ‹¤.
* `DELETE /v1/collection/{name}/book/remove?isbn={isbn}`: νΉμ • μ»¬λ ‰μ…μ—μ„ ISBNμ— ν•΄λ‹Ήν•λ” μ±…μ„ μ κ±°ν•©λ‹λ‹¤.
* `DELETE /v1/collection/delete?name={name}`: νΉμ • μ»¬λ ‰μ…μ„ μ‚­μ ν•©λ‹λ‹¤.

---
